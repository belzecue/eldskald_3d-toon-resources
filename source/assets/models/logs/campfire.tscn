[gd_scene load_steps=12 format=2]

[ext_resource path="res://assets/shader-codes/toon-shader/base-toon.shader" type="Shader" id=1]
[ext_resource path="res://assets/models/stones/small-rocks/rock-3.tscn" type="PackedScene" id=2]
[ext_resource path="res://assets/models/stones/small-rocks/rock-2.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/models/logs/timbers/timber-1.tscn" type="PackedScene" id=4]
[ext_resource path="res://assets/models/stones/small-rocks/rock-1.tscn" type="PackedScene" id=5]


[sub_resource type="Shader" id=1]
code = "// Outline, by GDQuest
// Source: https://github.com/GDQuest/godot-shaders
shader_type spatial;
render_mode cull_front, unshaded, depth_draw_always;

uniform vec4 outline_color : hint_color = vec4(0.0, 0.0, 0.0, 1.0);
uniform float outline_width = 1.0;



void vertex() {
	// Converts vertex position and normal to clip coordinates.
	vec4 clip_position = PROJECTION_MATRIX * (MODELVIEW_MATRIX * vec4(VERTEX, 1.0));
	vec3 clip_normal = mat3(PROJECTION_MATRIX) * (mat3(MODELVIEW_MATRIX) * NORMAL);

	// Calculates the width based off of view distance to keep
	// the outline width constant.
	clip_position.xy += normalize(clip_normal.xy) / VIEWPORT_SIZE * clip_position.w * outline_width * 2.0;

	POSITION = clip_position;
}



void fragment() {
	ALBEDO = outline_color.rgb;
	if(outline_color.a < 1.0) {
		ALPHA = outline_color.a;
	}
}


"

[sub_resource type="ShaderMaterial" id=9]
resource_local_to_scene = true
shader = SubResource( 1 )
shader_param/outline_color = Color( 0, 0, 0, 1 )
shader_param/outline_width = 2.0

[sub_resource type="ShaderMaterial" id=10]
resource_local_to_scene = true
next_pass = SubResource( 9 )
shader = ExtResource( 1 )
shader_param/albedo = Color( 0.215686, 0.14902, 0.054902, 1 )
shader_param/roughness = 1.0
shader_param/metallic = 0.0
shader_param/lighting = 0.0
shader_param/lighting_half_band = 0.0
shader_param/lighting_smoothness = 0.02
shader_param/specular = 0.0
shader_param/specular_glossiness = 16.0
shader_param/specular_smoothness = 0.05
shader_param/rim = 0.0
shader_param/rim_amount = 0.2
shader_param/rim_smoothness = 0.05
shader_param/emission = Color( 0, 0, 0, 1 )
shader_param/emission_energy = 1.0
shader_param/uv1_scale = Vector3( 1, 1, 1 )
shader_param/uv1_offset = Vector3( 0, 0, 0 )

[sub_resource type="Shader" id=4]
code = "// Outline, by GDQuest
// Source: https://github.com/GDQuest/godot-shaders
shader_type spatial;
render_mode cull_front, unshaded, depth_draw_always;

uniform vec4 outline_color : hint_color = vec4(0.0, 0.0, 0.0, 1.0);
uniform float outline_width = 1.0;



void vertex() {
	// Converts vertex position and normal to clip coordinates.
	vec4 clip_position = PROJECTION_MATRIX * (MODELVIEW_MATRIX * vec4(VERTEX, 1.0));
	vec3 clip_normal = mat3(PROJECTION_MATRIX) * (mat3(MODELVIEW_MATRIX) * NORMAL);

	// Calculates the width based off of view distance to keep
	// the outline width constant.
	clip_position.xy += normalize(clip_normal.xy) / VIEWPORT_SIZE * clip_position.w * outline_width * 2.0;

	POSITION = clip_position;
}



void fragment() {
	ALBEDO = outline_color.rgb;
	if(outline_color.a < 1.0) {
		ALPHA = outline_color.a;
	}
}


"

[sub_resource type="ShaderMaterial" id=7]
resource_local_to_scene = true
shader = SubResource( 4 )
shader_param/outline_color = Color( 0, 0, 0, 1 )
shader_param/outline_width = 2.0

[sub_resource type="ShaderMaterial" id=8]
resource_local_to_scene = true
next_pass = SubResource( 7 )
shader = ExtResource( 1 )
shader_param/albedo = Color( 0.313726, 0.258824, 0.184314, 1 )
shader_param/roughness = 1.0
shader_param/metallic = 0.0
shader_param/lighting = 0.0
shader_param/lighting_half_band = 0.0
shader_param/lighting_smoothness = 0.02
shader_param/specular = 0.0
shader_param/specular_glossiness = 16.0
shader_param/specular_smoothness = 0.05
shader_param/rim = 0.0
shader_param/rim_amount = 0.2
shader_param/rim_smoothness = 0.05
shader_param/emission = Color( 0, 0, 0, 1 )
shader_param/emission_energy = 1.0
shader_param/uv1_scale = Vector3( 1, 1, 1 )
shader_param/uv1_offset = Vector3( 0, 0, 0 )

[node name="Campfire" type="Spatial"]

[node name="Rock" parent="." instance=ExtResource( 5 )]
transform = Transform( -0.301854, 0, -0.953354, 0, 1, 0, 0.953354, 0, -0.301854, -0.358974, -0.00756562, -0.128196 )
material/0 = null

[node name="Rock2" parent="." instance=ExtResource( 2 )]
transform = Transform( 0.98617, 0, 0.165736, 0, 1, 0, -0.165736, 0, 0.98617, -0.262776, 5.96046e-08, -0.303209 )
material/0 = null

[node name="Rock3" parent="." instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.101331, 0, -0.407999 )
material/0 = null

[node name="Rock4" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.951589, 0, 0.307373, 0, 1, 0, -0.307373, 0, 0.951589, 0.0813373, 0, -0.407396 )

[node name="Rock5" parent="." instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.240417, -5.96046e-08, -0.315434 )

[node name="Rock6" parent="." instance=ExtResource( 2 )]
transform = Transform( 0.582648, 0, -0.812725, 0, 1, 0, 0.812725, 0, 0.582648, 0.343607, 0, -0.161421 )

[node name="Rock7" parent="." instance=ExtResource( 5 )]
transform = Transform( 0.9681, 0, -0.250566, 0, 1, 0, 0.250566, 0, 0.9681, 0.360149, 0, 0.0339314 )

[node name="Rock8" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.323884, 0, -0.946097, 0, 1, 0, 0.946097, 0, 0.323884, 0.284868, 0, 0.19896 )

[node name="Rock9" parent="." instance=ExtResource( 5 )]
transform = Transform( 0.773984, 0, -0.633205, 0, 1, 0, 0.633205, 0, 0.773984, 0.116942, 0, 0.325493 )

[node name="Rock10" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.643937, 0, -0.765079, 0, 1, 0, 0.765079, 0, 0.643937, -0.0729314, 0, 0.345666 )

[node name="Rock11" parent="." instance=ExtResource( 5 )]
transform = Transform( 0.538756, 0, -0.842462, 0, 1, 0, 0.842462, 0, 0.538756, -0.246516, 0, 0.228076 )

[node name="Rock12" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.949754, 0, -0.312998, 0, 1, 0, 0.312998, 0, 0.949754, -0.33347, 0, 0.065332 )

[node name="Timber" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 0.34202, -0.939693, 0, 0.939693, 0.34202, -0.00637475, 0.228549, 0.126599 )
material/0 = SubResource( 10 )
material/1 = SubResource( 8 )

[node name="Timber2" parent="." instance=ExtResource( 4 )]
transform = Transform( -0.9958, -0.0860324, -0.0313137, 0, 0.34202, -0.939693, 0.0915539, -0.935746, -0.340583, 0.00713094, 0.226134, -0.179466 )
material/0 = SubResource( 10 )
material/1 = SubResource( 8 )

[node name="Timber3" parent="." instance=ExtResource( 4 )]
transform = Transform( -0.0513944, -0.938451, -0.341568, 0, 0.34202, -0.939693, 0.998678, -0.0482948, -0.0175781, -0.131817, 0.226134, -0.0211298 )
material/0 = SubResource( 10 )
material/1 = SubResource( 8 )

[node name="Timber4" parent="." instance=ExtResource( 4 )]
transform = Transform( 0.0374805, 0.939032, 0.341779, 0, 0.34202, -0.939693, -0.999297, 0.0352199, 0.0128193, 0.137415, 0.226134, -0.0331472 )
material/0 = SubResource( 10 )
material/1 = SubResource( 8 )
